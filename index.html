<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Validator Info Lookup</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    input, button { padding: 10px; margin: 10px 0; width: 100%; }
    .result { margin-top: 20px; background: #f7f7f7; padding: 15px; border-radius: 8px; }
    h1 { font-size: 22px; margin-bottom: 15px; }
  </style>
</head>
<body>
  <h1>ğŸ” Validator Info Lookup (getInfo)</h1>

  <input type="text" id="validatorAddress" placeholder="Paste validator address here..." />
  <button onclick="lookup()">Check Info</button>

  <div class="result" id="result">ğŸŸ¡ Waiting for input...</div>

  <script>
    const contractAddress = '0xeE6d4e937f0493Fb461F28A75Cf591f1dBa8704E';

    const provider = new ethers.providers.StaticJsonRpcProvider('http://83.171.249.10:8545/', {
      name: 'sepolia',
      chainId: 11155111
    });

    const abi = [
      {
        "inputs": [{ "internalType": "address", "name": "", "type": "address" }],
        "name": "getInfo",
        "outputs": [
          { "internalType": "uint256", "name": "", "type": "uint256" },
          { "internalType": "address", "name": "", "type": "address" },
          { "internalType": "address", "name": "", "type": "address" },
          { "internalType": "uint8", "name": "", "type": "uint8" }
        ],
        "stateMutability": "view",
        "type": "function"
      }
    ];

    const contract = new ethers.Contract(contractAddress, abi, provider);

    async function lookup() {
      const address = document.getElementById('validatorAddress').value.trim().toLowerCase();
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = 'â³ Fetching info...';

      try {
        const [stakedAmount, proposer, withdrawer, status] = await contract.getInfo(address);

        resultDiv.innerHTML = `
          <strong>ğŸ“‹ BASIC INFO</strong><br>
          ğŸ”‘ Address: ${address}<br>
          ğŸ’° Staked Amount: ${ethers.utils.formatEther(stakedAmount)} ETH<br>
          ğŸ‘¤ Proposer Address: ${proposer}<br>
          ğŸ’¼ Withdrawer Address: ${withdrawer}<br>
          ğŸ“Š Status Code: ${status}
        `;
      } catch (error) {
        resultDiv.innerHTML = `<span style="color:red;">âŒ Error:</span> ${error.message}`;
        console.error(error);
      }
    }
  </script>
</body>
</html>
